{"version":3,"names":["ParticleBackground","constructor","options","this","config","Object","assign","zIndex","opacity","count","particles","mouse","x","y","max","initCanvas","initParticles","bindEvents","animate","canvas","document","createElement","style","cssText","body","appendChild","ctx","getContext","resizeCanvas","resizeObserver","ResizeObserver","observe","width","window","innerWidth","height","innerHeight","i","push","Math","random","xa","ya","color","randomColor","floor","addEventListener","e","clientX","clientY","clearRect","forEach","particle","index","fillStyle","fillRect","checkConnections","requestAnimationFrame","length","other","dx","dy","distanceSquared","handleMouseInteraction","beginPath","lineWidth","strokeStyle","moveTo","lineTo","stroke","destroy","removeEventListener","mouseMoveHandler","mouseOutHandler","disconnect","remove","particleBg"],"sources":["canvas.js.map"],"sourcesContent":["class ParticleBackground {\n  constructor(options = {}) {\n    this.config = Object.assign({\n      zIndex: -1,\n      opacity: 1,\n      count: 85\n    }, options);\n    this.particles = [];\n    this.mouse = {\n      x: null,\n      y: null,\n      max: 20000\n    };\n    this.initCanvas();\n    this.initParticles();\n    this.bindEvents();\n    this.animate();\n  }\n\n  // 创建 canvas\n  initCanvas() {\n    this.canvas = document.createElement(\"canvas\");\n    this.canvas.style.cssText = `position:fixed;top:0;left:0;z-index:${this.config.zIndex};opacity:${this.config.opacity};`;\n    document.body.appendChild(this.canvas);\n    this.ctx = this.canvas.getContext(\"2d\");\n    this.resizeCanvas();\n    this.resizeObserver = new ResizeObserver(() => this.resizeCanvas());\n    this.resizeObserver.observe(document.body);\n  }\n\n  // 调整 canvas 大小\n  resizeCanvas() {\n    this.width = this.canvas.width = window.innerWidth;\n    this.height = this.canvas.height = window.innerHeight;\n  }\n\n  // 初始化粒子\n  initParticles() {\n    for (let i = 0; i < this.config.count; i++) {\n      this.particles.push({\n        x: Math.random() * this.width,\n        y: Math.random() * this.height,\n        xa: 2 * Math.random() - 1,\n        ya: 2 * Math.random() - 1,\n        max: 6000,\n        color: this.config?.color ?? this.randomColor()\n      });\n    }\n    this.particles.push(this.mouse); // 添加鼠标粒子\n  }\n\n  // 生成随机颜色\n  randomColor() {\n    return `rgba(${Math.floor(Math.random() * 255)},${Math.floor(Math.random() * 255)},${Math.floor(Math.random() * 255)},1)`;\n  }\n\n  // 事件绑定\n  bindEvents() {\n    window.addEventListener(\"mousemove\", e => {\n      this.mouse.x = e.clientX;\n      this.mouse.y = e.clientY;\n    });\n    window.addEventListener(\"mouseout\", () => {\n      this.mouse.x = null;\n      this.mouse.y = null;\n    });\n  }\n\n  // 动画更新\n  animate() {\n    this.ctx.clearRect(0, 0, this.width, this.height);\n    this.particles.forEach((particle, index) => {\n      if (particle === this.mouse) return;\n\n      // 更新位置\n      particle.x += particle.xa;\n      particle.y += particle.ya;\n\n      // 边界反弹\n      if (particle.x > this.width || particle.x < 0) particle.xa *= -1;\n      if (particle.y > this.height || particle.y < 0) particle.ya *= -1;\n\n      // 绘制粒子\n      this.ctx.fillStyle = particle.color;\n      this.ctx.fillRect(particle.x - 0.5, particle.y - 0.5, 1, 1);\n\n      // 处理粒子之间的连接\n      this.checkConnections(particle, index);\n    });\n    requestAnimationFrame(() => this.animate());\n  }\n\n  // 处理粒子连接\n  checkConnections(particle, index) {\n    for (let i = index + 1; i < this.particles.length; i++) {\n      let other = this.particles[i];\n      if (!other.x || !other.y) continue;\n      let dx = particle.x - other.x;\n      let dy = particle.y - other.y;\n      let distanceSquared = dx * dx + dy * dy;\n      if (distanceSquared < other.max) {\n        this.handleMouseInteraction(particle, other, distanceSquared, dx, dy);\n        let opacity = (other.max - distanceSquared) / other.max;\n        this.ctx.beginPath();\n        this.ctx.lineWidth = opacity / 2;\n        this.ctx.strokeStyle = particle.color;\n        this.ctx.moveTo(particle.x, particle.y);\n        this.ctx.lineTo(other.x, other.y);\n        this.ctx.stroke();\n      }\n    }\n  }\n\n  // 鼠标靠近时的粒子交互\n  handleMouseInteraction(particle, other, distanceSquared, dx, dy) {\n    if (other === this.mouse && distanceSquared >= other.max / 2) {\n      particle.x -= 0.005 * dx;\n      particle.y -= 0.005 * dy;\n    }\n  }\n\n  // 销毁 canvas\n  destroy() {\n    window.removeEventListener(\"mousemove\", this.mouseMoveHandler);\n    window.removeEventListener(\"mouseout\", this.mouseOutHandler);\n    this.resizeObserver.disconnect();\n    this.canvas.remove();\n  }\n}\n\n// 启动粒子背景\nconst particleBg = new ParticleBackground({\n  opacity: 0.9,\n  count: 100\n});"],"mappings":"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","ignoreList":[]}