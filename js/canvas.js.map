{"version":3,"names":["ParticleBackground","constructor","options","this","config","Object","assign","zIndex","opacity","color","count","particles","mouse","x","y","max","initCanvas","initParticles","bindEvents","animate","canvas","document","createElement","style","cssText","body","appendChild","ctx","getContext","resizeCanvas","resizeObserver","ResizeObserver","observe","width","window","innerWidth","height","innerHeight","i","push","Math","random","xa","ya","randomColor","floor","addEventListener","e","clientX","clientY","clearRect","forEach","particle","index","fillStyle","fillRect","checkConnections","requestAnimationFrame","length","other","dx","dy","distanceSquared","handleMouseInteraction","beginPath","lineWidth","strokeStyle","moveTo","lineTo","stroke","destroy","removeEventListener","mouseMoveHandler","mouseOutHandler","disconnect","remove","particleBg"],"sources":["canvas.js.map"],"sourcesContent":["class ParticleBackground {\n  constructor(options = {}) {\n    this.config = Object.assign({\n      zIndex: -1,\n      opacity: 1,\n      color: \"255,0,0\",\n      count: 85\n    }, options);\n    this.particles = [];\n    this.mouse = {\n      x: null,\n      y: null,\n      max: 20000\n    };\n    this.initCanvas();\n    this.initParticles();\n    this.bindEvents();\n    this.animate();\n  }\n\n  // 创建 canvas\n  initCanvas() {\n    this.canvas = document.createElement(\"canvas\");\n    this.canvas.style.cssText = `position:fixed;top:0;left:0;z-index:${this.config.zIndex};opacity:${this.config.opacity};`;\n    document.body.appendChild(this.canvas);\n    this.ctx = this.canvas.getContext(\"2d\");\n    this.resizeCanvas();\n    this.resizeObserver = new ResizeObserver(() => this.resizeCanvas());\n    this.resizeObserver.observe(document.body);\n  }\n\n  // 调整 canvas 大小\n  resizeCanvas() {\n    this.width = this.canvas.width = window.innerWidth;\n    this.height = this.canvas.height = window.innerHeight;\n  }\n\n  // 初始化粒子\n  initParticles() {\n    for (let i = 0; i < this.config.count; i++) {\n      this.particles.push({\n        x: Math.random() * this.width,\n        y: Math.random() * this.height,\n        xa: 2 * Math.random() - 1,\n        ya: 2 * Math.random() - 1,\n        max: 6000,\n        color: this.randomColor()\n      });\n    }\n    this.particles.push(this.mouse); // 添加鼠标粒子\n  }\n\n  // 生成随机颜色\n  randomColor() {\n    return `rgba(${Math.floor(Math.random() * 255)},${Math.floor(Math.random() * 255)},${Math.floor(Math.random() * 255)},1)`;\n  }\n\n  // 事件绑定\n  bindEvents() {\n    window.addEventListener(\"mousemove\", e => {\n      this.mouse.x = e.clientX;\n      this.mouse.y = e.clientY;\n    });\n    window.addEventListener(\"mouseout\", () => {\n      this.mouse.x = null;\n      this.mouse.y = null;\n    });\n  }\n\n  // 动画更新\n  animate() {\n    this.ctx.clearRect(0, 0, this.width, this.height);\n    this.particles.forEach((particle, index) => {\n      if (particle === this.mouse) return;\n\n      // 更新位置\n      particle.x += particle.xa;\n      particle.y += particle.ya;\n\n      // 边界反弹\n      if (particle.x > this.width || particle.x < 0) particle.xa *= -1;\n      if (particle.y > this.height || particle.y < 0) particle.ya *= -1;\n\n      // 绘制粒子\n      this.ctx.fillStyle = particle.color;\n      this.ctx.fillRect(particle.x - 0.5, particle.y - 0.5, 1, 1);\n\n      // 处理粒子之间的连接\n      this.checkConnections(particle, index);\n    });\n    requestAnimationFrame(() => this.animate());\n  }\n\n  // 处理粒子连接\n  checkConnections(particle, index) {\n    for (let i = index + 1; i < this.particles.length; i++) {\n      let other = this.particles[i];\n      if (!other.x || !other.y) continue;\n      let dx = particle.x - other.x;\n      let dy = particle.y - other.y;\n      let distanceSquared = dx * dx + dy * dy;\n      if (distanceSquared < other.max) {\n        this.handleMouseInteraction(particle, other, distanceSquared, dx, dy);\n        let opacity = (other.max - distanceSquared) / other.max;\n        this.ctx.beginPath();\n        this.ctx.lineWidth = opacity / 2;\n        this.ctx.strokeStyle = particle.color;\n        this.ctx.moveTo(particle.x, particle.y);\n        this.ctx.lineTo(other.x, other.y);\n        this.ctx.stroke();\n      }\n    }\n  }\n\n  // 鼠标靠近时的粒子交互\n  handleMouseInteraction(particle, other, distanceSquared, dx, dy) {\n    if (other === this.mouse && distanceSquared >= other.max / 2) {\n      particle.x -= 0.03 * dx;\n      particle.y -= 0.03 * dy;\n    }\n  }\n\n  // 销毁 canvas\n  destroy() {\n    window.removeEventListener(\"mousemove\", this.mouseMoveHandler);\n    window.removeEventListener(\"mouseout\", this.mouseOutHandler);\n    this.resizeObserver.disconnect();\n    this.canvas.remove();\n  }\n}\n\n// 启动粒子背景\nconst particleBg = new ParticleBackground({\n  zIndex: -1,\n  opacity: 0.8,\n  color: \"0,255,255\",\n  count: 100\n});"],"mappings":"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","ignoreList":[]}