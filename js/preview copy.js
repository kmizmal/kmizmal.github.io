$(document).ready(function(){const e=$("<div id='image-preview'></div>").appendTo("#main"),n=$("<img>").appendTo(e);let t=0,o=1,c=!1,s=0,a=0,r=0,i=0,u=0,m=0,f=null;const p=[];function g(c,s){n.attr("src",c).on("error",()=>alert("图片加载失败")),t=s,o=1,n.css({transform:`scale(${o})`,position:"absolute"}),e.fadeIn(300),$(document).on("keydown",k)}function l(){e.fadeOut(300),$(document).off("keydown",k)}function d(e){const c=p.length;if(0===c)return;o=1,t=(t+e+c)%c;const s=$(p[t]).attr("src");n.attr("src",s);const a=$(p[(t+1)%c]).attr("src"),r=$(p[(t-1+c)%c]).attr("src");(new Image).src=a,(new Image).src=r}let w;function v(e){clearTimeout(w),w=setTimeout(()=>{o=Math.max(.1,Math.min(3,o+e)),n.css({transform:`scale(${o})`})},50)}function b(e){c&&(u=e.pageX-s,m=e.pageY-a,f||(f=requestAnimationFrame(()=>{n.css({left:`${r+u}px`,top:`${i+m}px`}),f=null})))}function h(){c=!1,n.css("cursor","grab"),$(document).off("mousemove",b),$(document).off("mouseup",h)}function k(n){if(e.is(":visible"))switch(n.key){case"Escape":l();break;case"ArrowLeft":case"ArrowUp":d(-1);break;case"ArrowRight":case"ArrowDown":d(1);break;case"+":v(.1);break;case"-":v(-.1)}}const A=$(".content img:not(#image-preview img, .footer img)");$("div.content").on("click","img:not(#image-preview img)",function(e){e.stopPropagation();const n=A.index(this);p.splice(0,p.length,...A),g(this.src,n)}),e.on("click",function(e){e.target!==n[0]&&l()}),$(window).on("resize",l),e.on("wheel",function(e){e.preventDefault();v(e.originalEvent.deltaY>0?-.1:.1)}),e.on("mousedown",function(e){0!==e.pageX&&0!==e.pageY?(c=!0,s=e.pageX,a=e.pageY,r=parseFloat(n.css("left"))||0,i=parseFloat(n.css("top"))||0,n.css("cursor","grabbing"),$(document).on("mousemove",b),$(document).on("mouseup",h),e.preventDefault()):l()})});
//# sourceMappingURL=search.js.map